@model LetsTest.Models.SingleProductDetails
@{
    ViewBag.Title = "SingleProduct";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="w3l_banner_nav_right">
    <div class="agileinfo_single">
        <h5>@Model.NAME</h5>
        <div class="col-md-4 agileinfo_single_left">
            <img id="example" src="@Model.IMAGE1" alt=" " class="img-responsive" />
        </div>
        <div class="col-md-8 agileinfo_single_right">
            <div class="w3agile_description">
                <h4>Description :</h4>
                <p>
                    @Model.DES
                </p>
            </div>
            <div class="snipcart-item block">
                <div class="snipcart-thumb agileinfo_single_right_snipcart">
                    <h4 style="font-size:1.0rem">Rs. @Model.PRICE</h4>
                    @Html.Hidden("CATEGORY_ID", Model.CATEGORY_ID, new { @id = "CATEGORY_ID" })
                </div>
                <div class="snipcart-details agileinfo_single_right_details">
                    <input type="button" name="AddToCart" value="Add to Cart" class="btn btn-primary" itemid="@Model.ID" id="btnAddToCart" onclick="AddToCart(this)" />
                </div>
            </div>
        </div>

        <div class="clearfix"> </div>
        <div style="margin-top:30px; border:2px solid #000;border-radius: 5px 20px 5px;">
            <h3 style="text-align:center;padding:10px">Store Information</h3>
            <div style="padding:10px 20px;display:flex;flex-direction:row;align-items:center;justify-content:center">
                <h4 style=" font-weight:600;font-size:1.1rem;">Sold By</h4>
                <h4 style=" font-weight:900;font-size:1.2rem; margin-left:50px">@Model.SNAME</h4>
                <div class="rating1">
                    <span class="starRating">
                        <input id="rating5" type="radio" name="rating" value="5">
                        <label for="rating5">5</label>
                        <input id="rating4" type="radio" name="rating" value="4">
                        <label for="rating4">4</label>
                        <input id="rating3" type="radio" name="rating" value="3" checked>
                        <label for="rating3">3</label>
                        <input id="rating2" type="radio" name="rating" value="2">
                        <label for="rating2">2</label>
                        <input id="rating1" type="radio" name="rating" value="1">
                        <label for="rating1">1</label>
                    </span>
                </div>

            </div>
            <div style="display:flex; justify-content:center;padding:10px">
                <a href="~/Single/StoreInfo/@Model.STORE_ID" id="btnvisitstore" class="btn-primary" value="@Model.STORE_ID">Visit Store</a>
            </div>
           
        </div>
    </div>
</div>

<div class="clearfix"></div>
<div id="RelateProds">

</div>
<div id="PeolpeBuy">

</div>

<script>
    $(document).ready(function ()
    {
        var categoryId = $("#CATEGORY_ID").val();
        $.ajax({
            type: "POST",
            url: '/Single/RealtedProds/' + categoryId
        }).done(function (data) {
            $("#RelateProds").html(data);
        })
    });
</script>
<script>
    $(document).ready(function () {
        var categoryId = $("#CATEGORY_ID").val();
        $.ajax({
            type: "POST",
            url: '/Single/PeopleBuy/' + categoryId
        }).done(function (data) {
            $("#PeolpeBuy").html(data);
        })
    });
</script>
<script>
    $(document).ready(function () {
        var StoreId = @Model.STORE_ID;
        debugger;
        $("#btnvisitstore").click(function () {
            $.ajax({
                type: "POST",
                url: '/Single/StoreInfo/' + StoreId
            });
        });
    });
</script>
<script type="text/javascript">
    function AddToCart(item) {
        var itemId = $(item).attr("itemid");
        var formData = new FormData();
        formData.append("ItemId", itemId);
        var count = 0;
        $.ajax({
            async: true,
            type: 'POST',
            contentType: false,
            processData: false,
            data: formData,
            url: '/Home/Index',
            success: function (data) {
                if (data.Success) {
                    $("#cartItem").text("Cart(" + data.Counter + ")");
                }
            },
            error: function () {
                alert("There is some Problem.");
            }
        });
    }
</script>